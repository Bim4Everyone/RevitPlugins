<ResourceDictionary
    xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
    xmlns:ui="http://schemas.lepo.co/wpfui/2022/xaml"
    xmlns:system="clr-namespace:System;assembly=mscorlib">
    <ResourceDictionary.MergedDictionaries>
        <ResourceDictionary
            Source="pack://application:,,,/Wpf.Ui;component/Controls/ListView/ListViewItem.xaml" />
        <ResourceDictionary
            Source="pack://application:,,,/Wpf.Ui;component/Controls/ListView/ListView.xaml" />
    </ResourceDictionary.MergedDictionaries>
    <!-- Стиль для ListView, в котором у выделенного элемента появляется синяя граница по периметру 
    вместо вертикального синего штриха слева как по дефолту в wpf ui -->
    <ControlTemplate
        x:Key="CustomNullViewItemTemplate"
        TargetType="{x:Type ui:ListViewItem}">
        <Border
            x:Name="Border"
            Margin="0"
            Padding="0"
            Background="{TemplateBinding Background}"
            BorderThickness="1"
            CornerRadius="{TemplateBinding Border.CornerRadius}">
            <Grid>
                <ContentPresenter
                    Margin="{TemplateBinding Padding}" />
                <Rectangle
                    x:Name="ActiveRectangle"
                    Margin="0"
                    HorizontalAlignment="Stretch"
                    VerticalAlignment="Stretch"
                    Stroke="{DynamicResource ListViewItemPillFillBrush}"
                    Fill="Transparent"
                    StrokeThickness="3"
                    RadiusX="8"
                    RadiusY="8"
                    Visibility="Collapsed" />
            </Grid>
        </Border>
        <ControlTemplate.Triggers>
            <MultiTrigger>
                <MultiTrigger.Conditions>
                    <Condition
                        Property="IsEnabled"
                        Value="True" />
                    <Condition
                        Property="IsMouseOver"
                        Value="True" />
                </MultiTrigger.Conditions>
                <Setter
                    TargetName="Border"
                    Property="Background"
                    Value="{DynamicResource ListViewItemBackgroundPointerOver}" />
            </MultiTrigger>
            <Trigger
                Property="IsSelected"
                Value="True">
                <Setter
                    TargetName="ActiveRectangle"
                    Property="Visibility"
                    Value="Visible" />
                <Setter
                    TargetName="Border"
                    Property="Background"
                    Value="{DynamicResource ListViewItemBackgroundPointerOver}" />
            </Trigger>
        </ControlTemplate.Triggers>
    </ControlTemplate>

    <ControlTemplate
        x:Key="CustomGridViewItemTemplate"
        TargetType="{x:Type ui:ListViewItem}">
        <Border
            x:Name="Border"
            Margin="0"
            Padding="0"
            Background="{TemplateBinding Background}"
            BorderBrush="{TemplateBinding Border.BorderBrush}"
            BorderThickness="{TemplateBinding Border.BorderThickness}"
            CornerRadius="{TemplateBinding Border.CornerRadius}">
            <Grid>
                <ui:GridViewRowPresenter
                    Margin="{TemplateBinding Padding}"
                    VerticalAlignment="{TemplateBinding Control.VerticalContentAlignment}"
                    Columns="{TemplateBinding GridView.ColumnCollection}"
                    Content="{TemplateBinding ContentControl.Content}" />
                <Rectangle
                    x:Name="ActiveRectangle"
                    Margin="0"
                    HorizontalAlignment="Stretch"
                    VerticalAlignment="Stretch"
                    Stroke="{DynamicResource ListViewItemPillFillBrush}"
                    Fill="Transparent"
                    StrokeThickness="3"
                    RadiusX="8"
                    RadiusY="8"
                    Visibility="Collapsed" />
            </Grid>
        </Border>
        <ControlTemplate.Triggers>
            <MultiTrigger>
                <MultiTrigger.Conditions>
                    <Condition
                        Property="IsEnabled"
                        Value="True" />
                    <Condition
                        Property="IsMouseOver"
                        Value="True" />
                </MultiTrigger.Conditions>
                <Setter
                    TargetName="Border"
                    Property="Background"
                    Value="{DynamicResource ListViewItemBackgroundPointerOver}" />
            </MultiTrigger>
            <Trigger
                Property="IsSelected"
                Value="True">
                <Setter
                    TargetName="ActiveRectangle"
                    Property="Visibility"
                    Value="Visible" />
                <Setter
                    TargetName="Border"
                    Property="Background"
                    Value="{DynamicResource ListViewItemBackgroundPointerOver}" />
            </Trigger>
        </ControlTemplate.Triggers>
    </ControlTemplate>

    <Style
        x:Key="CustomListViewItemStyle"
        BasedOn="{StaticResource ListViewItemStyle}"
        TargetType="{x:Type ui:ListViewItem}">
        <Style.Triggers>
            <DataTrigger
                Binding="{Binding Path=ViewState, RelativeSource={RelativeSource AncestorType={x:Type ListView}}}"
                Value="Default">
                <Setter
                    Property="Template"
                    Value="{StaticResource CustomNullViewItemTemplate}" />
            </DataTrigger>
            <DataTrigger
                Binding="{Binding Path=ViewState, RelativeSource={RelativeSource AncestorType={x:Type ListView}}}"
                Value="GridView">
                <Setter
                    Property="Template"
                    Value="{StaticResource CustomGridViewItemTemplate}" />
            </DataTrigger>
        </Style.Triggers>
    </Style>
</ResourceDictionary>